"use strict";angular.module("sw.plugin.markdown",["sw.plugins"]).factory("markdown",["$q","$log","$window",function(e,n,r){function i(r){n.debug("sw:execute","markdown");var i=e.defer();return r.info&&r.info.description&&(r.info.description=t(r.info.description.replace(/^<br ?\/?>/i,""))),angular.forEach(r.securityDefinitions,function(e){var n=e.description||"";"apiKey"===e.type&&n.toLowerCase()==="API Key Authentication".toLowerCase()?delete e.description:"basic"===e.type&&n.toLowerCase()==="Basic HTTP Authentication".toLowerCase()?delete e.description:"oauth2"===e.type&&n.toLowerCase()==="OAuth 2.0 Authentication".toLowerCase()?delete e.description:e.description=t(e.description)}),angular.forEach(r.resources,function(e){e.description=t(e.description),angular.forEach(e.operations,function(e){e.description=t(e.description),e.summary=e.summary?e.summary.replace(/(<br>)+$/,""):e.summary,angular.forEach(e.responses,function(e){e.description=t(e.description)})})}),i.resolve(),i.promise}function t(e){return a.makeHtml(e||"")}n.debug("sw:plugin","markdown");var o=r.hljs,s=r.showdown;s.extension("codehighlight",function(){function e(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}return[{type:"output",filter:function(n,r,i){var t="<pre><code\\b[^>]*>",a="</code></pre>",c="g",u=function(n,r,i,t){return r=e(r),i+o.highlightAuto(r).value+t};return s.helper.replaceRecursiveRegExp(n,u,t,a,c)}}]});var a=new s.Converter({extensions:["codehighlight"],simplifiedAutoLink:!0,tables:!0,tasklists:!0});return{execute:i}}]).run(["plugins","markdown",function(e,n){e.add(e.BEFORE_DISPLAY,n)}]);