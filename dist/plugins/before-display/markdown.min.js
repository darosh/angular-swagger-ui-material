"use strict";angular.module("sw.plugin.markdown",["sw.plugins"]).factory("markdown",["$q","$log","$window",function(e,t,n){function r(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function i(n){t.debug("sw:execute","markdown");var r=e.defer();return n.info&&n.info.description&&(n.info.description=o(n.info.description.replace(/^<br ?\/?>/i,""))),angular.forEach(n.securityDefinitions,function(e){var t=e.description||"";"apiKey"===e.type&&t.toLowerCase()==="API Key Authentication".toLowerCase()?delete e.description:"basic"===e.type&&t.toLowerCase()==="Basic HTTP Authentication".toLowerCase()?delete e.description:"oauth2"===e.type&&t.toLowerCase()==="OAuth 2.0 Authentication".toLowerCase()?delete e.description:e.description=o(e.description)}),angular.forEach(n.resources,function(e){e.description=o(e.description),angular.forEach(e.operations,function(e){e.description=o(e.description),e.summary=e.summary?e.summary.replace(/(<br>)+$/,""):e.summary,angular.forEach(e.responses,function(e){e.description=o(e.description)})})}),r.resolve(),r.promise}function o(e){return u.makeHtml(e||"")}t.debug("sw:plugin","markdown");var a=n.hljs,c=n.showdown;c.extension("codehighlight",function(){return[{type:"output",filter:function(e,t,n){var i="<pre><code\\b[^>]*>",o="</code></pre>",u="g",s=function(e,t,n,i){return t=r(t),n+a.highlightAuto(t).value+i};return c.helper.replaceRecursiveRegExp(e,s,i,o,u)}}]}),c.extension("tablecontainer",function(){return[{type:"output",filter:function(e,t,n){var i="<table>",o="</table>",a="g",u=function(e,t,n,i){return t=r(t),'<div class="table-container">'+n+t+i+"</div>"};return c.helper.replaceRecursiveRegExp(e,u,i,o,a)}}]});var u=new c.Converter({extensions:["codehighlight","tablecontainer"],simplifiedAutoLink:!0,tables:!0,tasklists:!0});return{execute:i}}]).run(["plugins","markdown",function(e,t){e.add(e.BEFORE_DISPLAY,t)}]);